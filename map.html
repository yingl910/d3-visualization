<!DOCTYPE html>
<html lang="en">

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- css -->
<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,900" rel="stylesheet">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="css/bootstrap.css" />
<link rel="stylesheet" href="css/styles.css" />
<link rel="stylesheet" href="css/stateface.css" />

<!-- jquery -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

<!-- Bootstrap -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>

<body>

    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="index.html"> <span class="sf sf-nc"></span> North Carolina Violence Prevention</a>
        </div>
        <div class="collapse navbar-collapse" id="myNavbar">
          <ul class="nav navbar-nav navbar-right">
            <li class="active"><a href="index.html">Home</a></li>
            <li><a href="stacked_bar.html">All Services</a></li>
            <li><a href="line_graph.html">In-Person Services</a></li>
            <li><a href="map.html">Map</a></li>
            <li><a href="about.html">About</a></li>
          </ul>
        </div>
      </div>
    </nav>

  <div class="container">

    <!-- Title Information -->
    <div class="row">
      <div class="col-sm-12 col-md-12 col-lg-12" id="headline">
        <p class="title">Domestic Violence and Sexual Assault In-Person Services Provided by County 2008-2016</p>
        <p id="info-text"> Hover over a county to see more information on the type of services offered. Filter information via the dropdown menus.</p>
      </div>
    </div>
    <!-- Dropdown or Buttons -->
    <div class="row">
      <div class="col-sm-12 col-md-1 col-lg-1"></div>
      <div class="col-sm-12 col-md-2 col-lg-2 map-dropdown">
        <p>Select resources:
        <select onchange="changeResource(this.options[this.selectedIndex].value);">
            <option value="dv">Domestic Violence</option>
            <option value="sa">Sexual Assault</option>
        </select>
        </p>
      </div>
      <div class="col-sm-12 col-md-2 col-lg-2 map-dropdown">
        <p>Select a year:
        <select onchange="changeYear(this.options[this.selectedIndex].value);">
            <option value="2015">2015-2016</option>
            <option value="2014">2014-2015</option>
            <option value="2013">2013-2014</option>
            <option value="2012">2012-2013</option>
            <option value="2011">2011-2012</option>
            <option value="2010">2010-2011</option>
            <option value="2009">2009-2010</option>
            <option value="2008">2008-2009</option>
        </select>
        </p>
      </div>
      <div class="col-sm-12 col-md-2 col-lg-2 map-dropdown">
        <p>Select a county:
        <select id="countySelect", onchange="selectCounty(this.options[this.selectedIndex].value)">
            <option value="none">-----</option>
        </select>
        </p>
      </div>
      <div class="col-sm-12 col-md-5 col-lg-5"></div>
    </div>
    <!-- NC Map Render -->
    <div class="row">
      <div class="col-sm-12 col-md-8 col-lg-8 map-container">
        <div id="ncmap"></div>
      </div>
      <div class="col-sm-12 col-md-4 col-lg-4 detail-container">
        <p id="detail-title">Services Details</p>
        <div id="detail-text">
        <span id="details">&nbsp;</span>
        </div>
      </div>
    </div>
    <!-- Graph about data -->
    <div class="row" id="about-data">
      <div class="col-sm-12 col-md-2 col-lg-2"></div>
      <div class="col-sm-12 col-md-8 col-lg-8" id="padding">
        <p><b>About this data:</b></p>
        <p>*** Prior to 2008, county programs were NOT required to collect data on a monthly basis. Due to the change, there was an increase in reported numbers compared to previous years 2004-2007. In order to follow a consistent data collection method, the map focuses on years 2008-2016.</p>
        <p>*** Some counties do not have data for certain years because the services in that county either did not submit data or the program did not operate during the fiscal year. Some programs submitted partial data and some programs only operated during half of the fiscal year. For the purposes of this project, 0 services provided, 0 clients, etc., is presented as “none reported.”</p>
      </div>
      <div class="col-sm-12 col-md-2 col-lg-2"></div>
    </div>

  </div> <!-- container -->

<script src="//d3js.org/d3.v4.min.js" charset="utf-8"></script>
<script src="//d3js.org/topojson.v1.min.js"></script>
<script src="https://d3js.org/d3-array.v1.min.js"></script>
<script src="js/map.js"></script>
<script src="js/line-graph.js"></script>

<script>

  d3.csv("data/dv-services-2015-16.csv", function(data) {
    data.forEach(function(d) {
        var mySelect = document.getElementById("countySelect")
        var element = document.createElement("option")
        element.textContent = d.County;
        element.value = d.County;
        mySelect.appendChild(element)
    });
  });

</script>


</body>
</html>
